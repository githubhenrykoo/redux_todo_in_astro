name: Telegram Notification

on:
  push:
    branches: [ main ]
  pull_request:
    branches: [ main ]
  workflow_dispatch:  # Allow manual triggering

jobs:
  notify:
    runs-on: ubuntu-latest
    
    steps:
    - uses: actions/checkout@v4
      
    - name: Send Telegram Notification with Analysis
      uses: appleboy/telegram-action@master
      with:
        to: ${{ secrets.TELEGRAM_CHAT_ID }}
        token: ${{ secrets.TELEGRAM_BOT_TOKEN }}
        format: markdown
        message: |
          *GitHub Analysis Report*
          
          *Repository:* `${{ github.repository }}`
          *Event:* `${{ github.event_name }}`
          *Branch:* `${{ github.ref_name }}`
          *Commit:* `${{ github.sha }}`
          
          *Analysis File:* Gemini Analysis Report Attached
          
          [View Full Report](${{ github.server_url }}/${{ github.repository }}/blob/main/Docs/analysis/gemini-analysis-2025-03-04.md)
        document: Docs/analysis/gemini-analysis-2025-03-04.md
