import{j as e}from"./jsx-dev-runtime.ndqpvE2b.js";import{r as n}from"./index.DKKB-h0h.js";const v=()=>{const[s,h]=n.useState(""),[t,m]=n.useState(null),[l,d]=n.useState(null),[c,x]=n.useState(!1),[f,N]=n.useState([]),[i,a]=n.useState(null),[b,_]=n.useState(null),p=async()=>{if(!s.trim()){d("Please enter a hash value");return}x(!0),d(null),m(null),N([]),a(null),_(null);try{console.log("Fetching card with hash:",s);const r=await fetch(`/api/get-card?hash=${encodeURIComponent(s)}`),o=await r.json();if(console.log("Card fetch response:",o),r.ok&&!o.error){if(m(o),_(o.serverTimestamp||null),o.content){const u=Object.keys(o.content);N(u),u.length>0&&a(u[0])}}else d(o.error||"Failed to retrieve card")}catch(r){console.error("Error fetching card:",r),d(r instanceof Error?r.message:"Unknown error occurred")}finally{x(!1)}};return e.jsxDEV("div",{className:"max-w-md mx-auto p-6 bg-white rounded-lg shadow-md mt-8",children:[e.jsxDEV("div",{className:"mb-4",children:[e.jsxDEV("label",{htmlFor:"hash",className:"block text-sm font-medium text-gray-700 mb-1",children:"Card Hash"},void 0,!1,{fileName:"/Users/Henrykoo/Documents/redux_todo_in_astro/src/components/CardViewer.tsx",lineNumber:71,columnNumber:9},void 0),e.jsxDEV("div",{className:"flex",children:[e.jsxDEV("input",{type:"text",id:"hash",value:s,onChange:r=>h(r.target.value),className:"flex-1 border border-gray-300 rounded-l-md px-3 py-2 focus:outline-none focus:ring-2 focus:ring-blue-500",placeholder:"Enter card hash"},void 0,!1,{fileName:"/Users/Henrykoo/Documents/redux_todo_in_astro/src/components/CardViewer.tsx",lineNumber:73,columnNumber:11},void 0),e.jsxDEV("button",{onClick:p,className:"bg-blue-500 text-white px-4 py-2 rounded-r-md hover:bg-blue-600 focus:outline-none focus:ring-2 focus:ring-blue-500",disabled:c,children:c?"Loading...":"Fetch"},void 0,!1,{fileName:"/Users/Henrykoo/Documents/redux_todo_in_astro/src/components/CardViewer.tsx",lineNumber:81,columnNumber:11},void 0)]},void 0,!0,{fileName:"/Users/Henrykoo/Documents/redux_todo_in_astro/src/components/CardViewer.tsx",lineNumber:72,columnNumber:9},void 0)]},void 0,!0,{fileName:"/Users/Henrykoo/Documents/redux_todo_in_astro/src/components/CardViewer.tsx",lineNumber:70,columnNumber:7},void 0),l&&e.jsxDEV("div",{className:"p-3 bg-red-100 text-red-700 rounded-md mb-4",children:l},void 0,!1,{fileName:"/Users/Henrykoo/Documents/redux_todo_in_astro/src/components/CardViewer.tsx",lineNumber:92,columnNumber:9},void 0),t&&e.jsxDEV("div",{className:"bg-gray-100 p-4 rounded-md",children:[e.jsxDEV("h3",{className:"font-medium text-lg mb-2",children:"Card Details"},void 0,!1,{fileName:"/Users/Henrykoo/Documents/redux_todo_in_astro/src/components/CardViewer.tsx",lineNumber:99,columnNumber:11},void 0),e.jsxDEV("div",{className:"mb-3 text-sm text-gray-600",children:[e.jsxDEV("p",{children:[e.jsxDEV("strong",{children:"Hash:"},void 0,!1,{fileName:"/Users/Henrykoo/Documents/redux_todo_in_astro/src/components/CardViewer.tsx",lineNumber:102,columnNumber:16},void 0)," ",t.hash]},void 0,!0,{fileName:"/Users/Henrykoo/Documents/redux_todo_in_astro/src/components/CardViewer.tsx",lineNumber:102,columnNumber:13},void 0),e.jsxDEV("p",{children:[e.jsxDEV("strong",{children:"Created:"},void 0,!1,{fileName:"/Users/Henrykoo/Documents/redux_todo_in_astro/src/components/CardViewer.tsx",lineNumber:103,columnNumber:16},void 0)," ",new Date(t.g_time||"").toLocaleString()]},void 0,!0,{fileName:"/Users/Henrykoo/Documents/redux_todo_in_astro/src/components/CardViewer.tsx",lineNumber:103,columnNumber:13},void 0),b&&e.jsxDEV("p",{children:[e.jsxDEV("strong",{children:"Retrieved:"},void 0,!1,{fileName:"/Users/Henrykoo/Documents/redux_todo_in_astro/src/components/CardViewer.tsx",lineNumber:105,columnNumber:18},void 0)," ",new Date(b).toLocaleString()]},void 0,!0,{fileName:"/Users/Henrykoo/Documents/redux_todo_in_astro/src/components/CardViewer.tsx",lineNumber:105,columnNumber:15},void 0)]},void 0,!0,{fileName:"/Users/Henrykoo/Documents/redux_todo_in_astro/src/components/CardViewer.tsx",lineNumber:101,columnNumber:11},void 0),f.length>0&&e.jsxDEV(e.Fragment,{children:[e.jsxDEV("div",{className:"mb-3",children:[e.jsxDEV("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"View Section"},void 0,!1,{fileName:"/Users/Henrykoo/Documents/redux_todo_in_astro/src/components/CardViewer.tsx",lineNumber:112,columnNumber:17},void 0),e.jsxDEV("select",{value:i||"",onChange:r=>a(r.target.value),className:"w-full border border-gray-300 rounded-md px-3 py-2 focus:outline-none focus:ring-2 focus:ring-blue-500",children:f.map(r=>e.jsxDEV("option",{value:r,children:r},r,!1,{fileName:"/Users/Henrykoo/Documents/redux_todo_in_astro/src/components/CardViewer.tsx",lineNumber:119,columnNumber:21},void 0))},void 0,!1,{fileName:"/Users/Henrykoo/Documents/redux_todo_in_astro/src/components/CardViewer.tsx",lineNumber:113,columnNumber:17},void 0)]},void 0,!0,{fileName:"/Users/Henrykoo/Documents/redux_todo_in_astro/src/components/CardViewer.tsx",lineNumber:111,columnNumber:15},void 0),i&&e.jsxDEV("div",{className:"bg-white p-3 rounded-md border border-gray-300 overflow-auto max-h-60",children:e.jsxDEV("pre",{className:"text-xs whitespace-pre-wrap",children:JSON.stringify(t.content[i],null,2)},void 0,!1,{fileName:"/Users/Henrykoo/Documents/redux_todo_in_astro/src/components/CardViewer.tsx",lineNumber:126,columnNumber:19},void 0)},void 0,!1,{fileName:"/Users/Henrykoo/Documents/redux_todo_in_astro/src/components/CardViewer.tsx",lineNumber:125,columnNumber:17},void 0)]},void 0,!0,{fileName:"/Users/Henrykoo/Documents/redux_todo_in_astro/src/components/CardViewer.tsx",lineNumber:110,columnNumber:13},void 0)]},void 0,!0,{fileName:"/Users/Henrykoo/Documents/redux_todo_in_astro/src/components/CardViewer.tsx",lineNumber:98,columnNumber:9},void 0)]},void 0,!0,{fileName:"/Users/Henrykoo/Documents/redux_todo_in_astro/src/components/CardViewer.tsx",lineNumber:69,columnNumber:5},void 0)};export{v as CardViewer};
