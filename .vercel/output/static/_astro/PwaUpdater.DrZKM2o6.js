import{j as o}from"./jsx-dev-runtime.ndqpvE2b.js";import{r as n}from"./index.DKKB-h0h.js";const v=()=>{const[c,i]=n.useState(!1),[s,l]=n.useState(null),[d,u]=n.useState(!1);if(n.useEffect(()=>(u(!0),typeof window>"u"||!("serviceWorker"in navigator)?void 0:((async()=>{if("serviceWorker"in navigator)try{const t=await navigator.serviceWorker.getRegistrations();if(t.length>0){console.log("Found existing service worker registration");const e=t[0];l(e),e.addEventListener("updatefound",()=>{const r=e.installing;console.log("Service Worker update found!"),r.addEventListener("statechange",()=>{console.log("Service worker state:",r.state),r.state==="installed"&&navigator.serviceWorker.controller&&(console.log("New content is available!"),i(!0))})});const a=()=>{e.update&&(console.log("Checking for service worker updates..."),e.update().catch(r=>{console.error("Error checking for service worker updates:",r)}))};a();const f=setInterval(a,60*60*1e3);return()=>{clearInterval(f)}}else console.log("No existing service worker registration found")}catch(t){console.error("Error monitoring service worker:",t)}else console.warn("Service workers not supported in this browser")})(),()=>{})),[]),!d)return null;const p=()=>{s&&s.waiting?s.waiting.postMessage({type:"SKIP_WAITING"}):window.location.reload(),i(!1)};return o.jsxDEV(o.Fragment,{children:c&&o.jsxDEV("div",{style:{position:"fixed",bottom:"24px",left:"24px",right:"24px",padding:"16px",borderRadius:"4px",backgroundColor:"#2563eb",color:"white",boxShadow:"0 4px 6px rgba(0, 0, 0, 0.1)",display:"flex",justifyContent:"space-between",alignItems:"center",zIndex:9999},children:[o.jsxDEV("p",{style:{margin:0},children:"New version available! Update to get the latest features."},void 0,!1,{fileName:"/Users/Henrykoo/Documents/redux_todo_in_astro/src/components/PwaUpdater.jsx",lineNumber:119,columnNumber:11},void 0),o.jsxDEV("button",{onClick:p,style:{backgroundColor:"white",color:"#2563eb",border:"none",padding:"8px 16px",borderRadius:"4px",fontWeight:"bold",cursor:"pointer"},children:"Refresh"},void 0,!1,{fileName:"/Users/Henrykoo/Documents/redux_todo_in_astro/src/components/PwaUpdater.jsx",lineNumber:120,columnNumber:11},void 0)]},void 0,!0,{fileName:"/Users/Henrykoo/Documents/redux_todo_in_astro/src/components/PwaUpdater.jsx",lineNumber:102,columnNumber:9},void 0)},void 0,!1,{fileName:"/Users/Henrykoo/Documents/redux_todo_in_astro/src/components/PwaUpdater.jsx",lineNumber:100,columnNumber:5},void 0)};export{v as default};
