import{j as o}from"./jsx-dev-runtime.ndqpvE2b.js";import{r as t,R as W}from"./index.DKKB-h0h.js";const K=({className:w=""})=>{const[P,I]=t.useState([]),[x,i]=t.useState([{role:"system",content:`How can I help?

Command:
- "read the testing.txt", "show contents of testing.txt"
- "list files in downloads"
- "where am i"
- "make directory testing"
- "delete file testing.txt"`}]),[l,h]=t.useState(""),[m,b]=t.useState(!1),[_,p]=t.useState(null),[g,k]=t.useState([]),[y,E]=t.useState("llama3"),v=t.useRef(null),N=t.useRef(null),d=t.useRef(null);t.useEffect(()=>{j()},[]),t.useEffect(()=>{H()},[x]);const j=async()=>{try{const e=await fetch("http://localhost:11434/api/tags");if(!e.ok)throw new Error("Failed to fetch models");const r=await e.json();k(r.models||[])}catch(e){console.error("Error fetching models:",e),p("Failed to connect to Ollama server. Make sure it's running on http://localhost:11434")}},H=()=>{v.current?.scrollIntoView({behavior:"smooth"})},V=e=>{h(e.target.value)},U=e=>{e.key==="Enter"&&!e.shiftKey&&(e.preventDefault(),D())};t.useEffect(()=>(S(),()=>{d.current&&d.current.close()}),[]);const S=()=>{try{const e=new WebSocket("ws://localhost:3001");d.current=e,e.onmessage=r=>{const n=JSON.parse(r.data);n.type==="output"&&i(s=>[...s,{role:"assistant",content:n.data}])}}catch(e){console.error("Terminal connection error:",e)}},C=e=>{const r=/(?:read|show|display|open)\s+(?:contents\s+of\s+|the\s+)?(?:file\s+)?["']?([^"']+?)["']?\s*$/i,n=/(?:list|show)\s+(?:files|directory|contents)\s*(?:in\s+)?(.+)?/i,s=/(?:make|create)\s+(?:a\s+)?(?:new\s+)?directory\s+(?:named\s+)?(.+)/i,a=/(?:remove|delete)\s+(?:the\s+)?(?:file|directory)?\s+(.+)/i;let c="";if(r.test(e))c=`cat "${e.match(r)[1].trim()}"`;else if(n.test(e)){const f=e.match(n);c=`ls ${f[1]?`"${f[1].trim()}"`:""}`.trim()}else s.test(e)?c=`mkdir "${e.match(s)[1].trim()}"`:a.test(e)?c=`rm "${e.match(a)[1].trim()}"`:e.toLowerCase().includes("current directory")||e.toLowerCase().includes("where am i")?c="pwd":e.toLowerCase().includes("clear screen")&&(c="clear");return c},D=async()=>{if(!l.trim()||m)return;const e={role:"user",content:l.trim()};i(n=>[...n,e]),h(""),b(!0),p(null);const r=C(l.trim());if(l.trim().startsWith("$")||r){const n=l.trim().startsWith("$")?l.trim().slice(1):r;d.current?.readyState===WebSocket.OPEN&&d.current.send(JSON.stringify({type:"input",data:n+`
`})),b(!1);return}try{i(a=>[...a,{role:"assistant",content:"...",isThinking:!0}]);const n=await fetch("http://localhost:11434/api/chat",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({model:y,messages:[...x.filter(a=>!a.isThinking),e],stream:!1})});if(!n.ok)throw new Error(`Error: ${n.statusText}`);const s=await n.json();i(a=>[...a.filter(c=>!c.isThinking),{role:"assistant",content:s.message?.content||"No response from model"}])}catch(n){console.error("Error sending message:",n),i(s=>[...s.filter(a=>!a.isThinking),{role:"error",content:`Error: ${n.message}. Make sure Ollama is running with llama3 model.`}]),p(n.message)}finally{b(!1)}},T=()=>{i([{role:"system",content:"How can I help?"}])},$=e=>{E(e.target.value)},[L,z]=t.useState(""),M=e=>{const n=window.getSelection().toString().trim()||e;h(s=>s+(s?" ":"")+n),N.current?.focus()},[u,O]=t.useState(!0),R=()=>{O(e=>!e)};return o.jsxDEV("div",{className:`h-full w-full flex flex-col bg-gray-900 text-gray-200 ${w}`,children:[o.jsxDEV("div",{className:"p-2 bg-gray-800 border-b border-gray-700 flex items-center",children:[o.jsxDEV("div",{className:"flex space-x-2 mr-4",children:[o.jsxDEV("div",{className:"w-3 h-3 rounded-full bg-red-500"},void 0,!1,{fileName:"/Users/Henrykoo/Documents/redux_todo_in_astro/src/components/panels/chatbot.jsx",lineNumber:250,columnNumber:11},void 0),o.jsxDEV("div",{className:"w-3 h-3 rounded-full bg-yellow-500"},void 0,!1,{fileName:"/Users/Henrykoo/Documents/redux_todo_in_astro/src/components/panels/chatbot.jsx",lineNumber:251,columnNumber:11},void 0),o.jsxDEV("div",{className:"w-3 h-3 rounded-full bg-green-500"},void 0,!1,{fileName:"/Users/Henrykoo/Documents/redux_todo_in_astro/src/components/panels/chatbot.jsx",lineNumber:252,columnNumber:11},void 0)]},void 0,!0,{fileName:"/Users/Henrykoo/Documents/redux_todo_in_astro/src/components/panels/chatbot.jsx",lineNumber:249,columnNumber:9},void 0),o.jsxDEV("div",{className:"text-center flex-grow",children:"ChatBot - MCP Server with Ollama Integration"},void 0,!1,{fileName:"/Users/Henrykoo/Documents/redux_todo_in_astro/src/components/panels/chatbot.jsx",lineNumber:254,columnNumber:9},void 0),o.jsxDEV("button",{onClick:R,className:`mr-2 px-2 py-1 text-xs rounded ${u?"bg-green-600 hover:bg-green-700":"bg-gray-600 hover:bg-gray-700"}`,children:["Word Select: ",u?"On":"Off"]},void 0,!0,{fileName:"/Users/Henrykoo/Documents/redux_todo_in_astro/src/components/panels/chatbot.jsx",lineNumber:255,columnNumber:9},void 0),o.jsxDEV("select",{value:y,onChange:$,className:"mr-2 px-2 py-1 text-xs bg-gray-700 text-white rounded",children:g.length>0?g.map(e=>o.jsxDEV("option",{value:e.name,children:e.name},e.name,!1,{fileName:"/Users/Henrykoo/Documents/redux_todo_in_astro/src/components/panels/chatbot.jsx",lineNumber:272,columnNumber:15},void 0)):o.jsxDEV("option",{value:"llama3",children:"llama3"},void 0,!1,{fileName:"/Users/Henrykoo/Documents/redux_todo_in_astro/src/components/panels/chatbot.jsx",lineNumber:277,columnNumber:13},void 0)},void 0,!1,{fileName:"/Users/Henrykoo/Documents/redux_todo_in_astro/src/components/panels/chatbot.jsx",lineNumber:265,columnNumber:9},void 0),o.jsxDEV("button",{onClick:T,className:"px-2 py-1 text-xs bg-gray-700 hover:bg-gray-600 rounded",children:"Clear"},void 0,!1,{fileName:"/Users/Henrykoo/Documents/redux_todo_in_astro/src/components/panels/chatbot.jsx",lineNumber:280,columnNumber:9},void 0)]},void 0,!0,{fileName:"/Users/Henrykoo/Documents/redux_todo_in_astro/src/components/panels/chatbot.jsx",lineNumber:248,columnNumber:7},void 0),_&&o.jsxDEV("div",{className:"bg-red-900 text-red-100 p-2 text-sm",children:[_,o.jsxDEV("button",{onClick:j,className:"ml-2 px-2 py-0.5 bg-red-800 hover:bg-red-700 rounded text-xs",children:"Retry"},void 0,!1,{fileName:"/Users/Henrykoo/Documents/redux_todo_in_astro/src/components/panels/chatbot.jsx",lineNumber:291,columnNumber:11},void 0)]},void 0,!0,{fileName:"/Users/Henrykoo/Documents/redux_todo_in_astro/src/components/panels/chatbot.jsx",lineNumber:289,columnNumber:9},void 0),o.jsxDEV("div",{className:"flex-1 p-4 overflow-y-auto",children:[x.map((e,r)=>o.jsxDEV("div",{className:`mb-4 ${e.role==="user"?"text-right":e.role==="error"?"text-center":"text-left"}`,children:o.jsxDEV("div",{className:`inline-block px-4 py-2 rounded-lg max-w-[80%] ${e.role==="user"?"bg-blue-600 text-white rounded-br-none":e.role==="system"?"bg-gray-700 text-gray-200":e.role==="error"?"bg-red-600 text-white":"bg-gray-800 text-gray-200 rounded-bl-none"} ${e.isThinking?"animate-pulse":""}`,children:[o.jsxDEV("div",{className:"whitespace-pre-wrap",onMouseUp:()=>{if(!u)return;const n=window.getSelection().toString().trim();n&&(h(s=>s+(s?" ":"")+n),N.current?.focus())},children:e.role==="assistant"&&!e.isThinking?e.content.split(" ").map((n,s)=>o.jsxDEV(W.Fragment,{children:[o.jsxDEV("span",{className:`${u?"cursor-pointer hover:text-yellow-400":""} transition-colors`,onClick:()=>u&&M(n),children:n},void 0,!1,{fileName:"/Users/Henrykoo/Documents/redux_todo_in_astro/src/components/panels/chatbot.jsx",lineNumber:327,columnNumber:23},void 0)," "]},s,!0,{fileName:"/Users/Henrykoo/Documents/redux_todo_in_astro/src/components/panels/chatbot.jsx",lineNumber:326,columnNumber:21},void 0)):e.content},void 0,!1,{fileName:"/Users/Henrykoo/Documents/redux_todo_in_astro/src/components/panels/chatbot.jsx",lineNumber:313,columnNumber:15},void 0),e.role!=="user"&&e.role!=="system"&&e.role!=="error"&&o.jsxDEV("div",{className:"text-xs text-gray-400 mt-1",children:"System"},void 0,!1,{fileName:"/Users/Henrykoo/Documents/redux_todo_in_astro/src/components/panels/chatbot.jsx",lineNumber:341,columnNumber:17},void 0)]},void 0,!0,{fileName:"/Users/Henrykoo/Documents/redux_todo_in_astro/src/components/panels/chatbot.jsx",lineNumber:307,columnNumber:13},void 0)},r,!1,{fileName:"/Users/Henrykoo/Documents/redux_todo_in_astro/src/components/panels/chatbot.jsx",lineNumber:302,columnNumber:11},void 0)),o.jsxDEV("div",{ref:v},void 0,!1,{fileName:"/Users/Henrykoo/Documents/redux_todo_in_astro/src/components/panels/chatbot.jsx",lineNumber:348,columnNumber:9},void 0)]},void 0,!0,{fileName:"/Users/Henrykoo/Documents/redux_todo_in_astro/src/components/panels/chatbot.jsx",lineNumber:300,columnNumber:7},void 0),o.jsxDEV("div",{className:"p-4 border-t border-gray-700",children:[o.jsxDEV("div",{className:"flex items-start",children:[o.jsxDEV("textarea",{ref:N,value:l,onChange:V,onKeyDown:U,placeholder:"Type your message here...",className:"flex-grow p-2 bg-gray-800 text-white rounded-lg resize-none h-12 max-h-32 min-h-[3rem]",rows:1,disabled:m},void 0,!1,{fileName:"/Users/Henrykoo/Documents/redux_todo_in_astro/src/components/panels/chatbot.jsx",lineNumber:353,columnNumber:11},void 0),o.jsxDEV("button",{onClick:D,disabled:m||!l.trim(),className:`ml-2 px-4 py-2 rounded-lg ${m||!l.trim()?"bg-gray-700 text-gray-500 cursor-not-allowed":"bg-blue-600 text-white hover:bg-blue-700"}`,children:m?o.jsxDEV("svg",{className:"animate-spin h-5 w-5",xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",children:[o.jsxDEV("circle",{className:"opacity-25",cx:"12",cy:"12",r:"10",stroke:"currentColor",strokeWidth:"4"},void 0,!1,{fileName:"/Users/Henrykoo/Documents/redux_todo_in_astro/src/components/panels/chatbot.jsx",lineNumber:374,columnNumber:17},void 0),o.jsxDEV("path",{className:"opacity-75",fill:"currentColor",d:"M4 12a8 8 0 018-8V0C5.373 0 0 5.373 0 12h4zm2 5.291A7.962 7.962 0 014 12H0c0 3.042 1.135 5.824 3 7.938l3-2.647z"},void 0,!1,{fileName:"/Users/Henrykoo/Documents/redux_todo_in_astro/src/components/panels/chatbot.jsx",lineNumber:375,columnNumber:17},void 0)]},void 0,!0,{fileName:"/Users/Henrykoo/Documents/redux_todo_in_astro/src/components/panels/chatbot.jsx",lineNumber:373,columnNumber:15},void 0):o.jsxDEV("svg",{xmlns:"http://www.w3.org/2000/svg",className:"h-5 w-5",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",children:o.jsxDEV("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M12 19l9 2-9-18-9 18 9-2zm0 0v-8"},void 0,!1,{fileName:"/Users/Henrykoo/Documents/redux_todo_in_astro/src/components/panels/chatbot.jsx",lineNumber:379,columnNumber:17},void 0)},void 0,!1,{fileName:"/Users/Henrykoo/Documents/redux_todo_in_astro/src/components/panels/chatbot.jsx",lineNumber:378,columnNumber:15},void 0)},void 0,!1,{fileName:"/Users/Henrykoo/Documents/redux_todo_in_astro/src/components/panels/chatbot.jsx",lineNumber:363,columnNumber:11},void 0)]},void 0,!0,{fileName:"/Users/Henrykoo/Documents/redux_todo_in_astro/src/components/panels/chatbot.jsx",lineNumber:352,columnNumber:9},void 0),o.jsxDEV("div",{className:"text-xs text-gray-500 mt-2",children:"Press Enter to send, Shift+Enter for new line"},void 0,!1,{fileName:"/Users/Henrykoo/Documents/redux_todo_in_astro/src/components/panels/chatbot.jsx",lineNumber:384,columnNumber:9},void 0)]},void 0,!0,{fileName:"/Users/Henrykoo/Documents/redux_todo_in_astro/src/components/panels/chatbot.jsx",lineNumber:351,columnNumber:7},void 0)]},void 0,!0,{fileName:"/Users/Henrykoo/Documents/redux_todo_in_astro/src/components/panels/chatbot.jsx",lineNumber:247,columnNumber:5},void 0)};export{K as default};
