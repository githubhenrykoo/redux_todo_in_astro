# Git Activity Log - Henry Koo
Generated at: Mon Apr 14 00:46:33 UTC 2025
## Changes by Henry Koo
```diff
commit c8a3fbb658a00299adda483cd99e593c09a220f9
Author: Henry Koo <lckoo1230@gmail.com>
Date:   Mon Apr 14 02:19:25 2025 +0800

    new todo and clm display

diff --git a/Docs/to-do-plan b/Docs/to-do-plan
index fc99a35..ac6205c 160000
--- a/Docs/to-do-plan
+++ b/Docs/to-do-plan
@@ -1 +1 @@
-Subproject commit fc99a35ab5c0893ad2f2555bf793fed4780c6f58
+Subproject commit ac6205c00419a3745c66da6101f987902de77ecf
diff --git a/src/components/panels/CLMDisplayPanel.jsx b/src/components/panels/CLMDisplayPanel.jsx
index b58cfaf..38ee907 100644
--- a/src/components/panels/CLMDisplayPanel.jsx
+++ b/src/components/panels/CLMDisplayPanel.jsx
@@ -9,9 +9,9 @@ const CLMDisplayPanel = ({ initialHash = '' }) => {
     const [error, setError] = useState(null);
     const [dimensions, setDimensions] = useState({
         abstractSpecification: null,
-        concreteImplementation: null,
-        balancedExpectations: null
+        concreteImplementation: null
     });
+    const [balancedExpectations, setBalancedExpectations] = useState([]);
     const [debug, setDebug] = useState({
         lastFetchedHash: null,
         apiResponse: null,
@@ -55,15 +55,22 @@ const CLMDisplayPanel = ({ initialHash = '' }) => {
         if (rootClm) {
             if (rootClm.dimensions) {
                 loadDimensions(rootClm.dimensions);
+                // Search for related Balanced Expectations
+                if (selectedHash) {
+                    searchBalancedExpectations(selectedHash);
+                }
             } else if (rootClm.type === 'clm_document' && rootClm.dimensions) {
                 // Special handling for clm_document type
                 loadDimensions(rootClm.dimensions);
+                // Search for related Balanced Expectations
+                if (selectedHash) {
+                    searchBalancedExpectations(selectedHash);
+                }
             } else {
                 // Reset dimensions if no dimensions property
                 setDimensions({
                     abstractSpecification: null,
-                    concreteImplementation: null,
-                    balancedExpectations: null
+                    concreteImplementation: null
                 });
                 
                 // Set error for debugging
@@ -73,9 +80,10 @@ const CLMDisplayPanel = ({ initialHash = '' }) => {
             // Reset dimensions if no root CLM
             setDimensions({
                 abstractSpecification: null,
-                concreteImplementation: null,
-                balancedExpectations: null
+                concreteImplementation: null
             });
+            // Reset balanced expectations too
+            setBalancedExpectations([]);
         }
     }, [rootClm]);
 
@@ -100,19 +108,15 @@ const CLMDisplayPanel = ({ initialHash = '' }) => {
                 if (cards[abstractHash]) {
                     console.log(`Found Abstract Specification in Redux store: ${abstractHash}`);
                     abstractSpec = typeof cards[abstractHash].content === 'string' 
-                        ? JSON.parse(cards[abstractHash].content)
+                        ? JSON.parse(cards[abstractHash].content) 
                         : cards[abstractHash].content;
                 } else {
-                    // If not in store, fetch it
+                    // Fetch the abstract specification dimension
                     console.log(`Fetching Abstract Specification: ${abstractHash}`);
                     abstractSpec = await fetchDimension('abstractSpecification', abstractHash);
                 }
-                
-                if (abstractSpec) {
-                    setDimensions(prev => ({ ...prev, abstractSpecification: abstractSpec }));
-                }
             }
-            
+
             // Check if concrete implementation is already in Redux store
             let concreteImpl = null;
             if (dimensionHashes.concreteImplementation) {
@@ -122,206 +126,193 @@ const CLMDisplayPanel = ({ initialHash = '' }) => {
                 if (cards[concreteHash]) {
                     console.log(`Found Concrete Implementation in Redux store: ${concreteHash}`);
                     concreteImpl = typeof cards[concreteHash].content === 'string' 
-                        ? JSON.parse(cards[concreteHash].content)
+                        ? JSON.parse(cards[concreteHash].content) 
                         : cards[concreteHash].content;
                 } else {
-                    // If not in store, fetch it
+                    // Fetch the concrete implementation dimension
                     console.log(`Fetching Concrete Implementation: ${concreteHash}`);
                     concreteImpl = await fetchDimension('concreteImplementation', concreteHash);
                 }
-                
-                if (concreteImpl) {
-                    setDimensions(prev => ({ ...prev, concreteImplementation: concreteImpl }));
-                }
             }
-            
-            // Check if balanced expectations is already in Redux store
-            let balancedExp = null;
-            if (dimensionHashes.balancedExpectations) {
-                const balancedHash = dimensionHashes.balancedExpectations;
-                
-                // Check if the card is already in the Redux store
-                if (cards[balancedHash]) {
-                    console.log(`Found Balanced Expectations in Redux store: ${balancedHash}`);
-                    balancedExp = typeof cards[balancedHash].content === 'string' 
-                        ? JSON.parse(cards[balancedHash].content)
-                        : cards[balancedHash].content;
-                } else {
-                    // If not in store, fetch it
-                    console.log(`Fetching Balanced Expectations: ${balancedHash}`);
-                    balancedExp = await fetchDimension('balancedExpectations', balancedHash);
-                }
-                
-                if (balancedExp) {
-                    setDimensions(prev => ({ ...prev, balancedExpectations: balancedExp }));
+
+            // Update dimensions in state
+            setDimensions({
+                abstractSpecification: abstractSpec,
+                concreteImplementation: concreteImpl
+            });
+
+            // Save for debugging
+            setDebug(prev => ({
+                ...prev,
+                dimensionData: {
+                    abstractSpecification: abstractSpec,
+                    concreteImplementation: concreteImpl
                 }
-            }
+            }));
+            
         } catch (error) {
             console.error('Error loading dimensions:', error);
-            setError(`Error loading dimension data: ${error.message}`);
+            setError(`Error loading dimensions: ${error.message}`);
         } finally {
             setLoading(false);
         }
     };
-
-    // Helper function to fetch a single dimension by hash
-    const fetchDimension = async (dimensionType, hash) => {
-        setDebug(prev => ({ ...prev, lastFetchedHash: hash }));
-        
+    
+    // Search for Balanced Expectations that reference this CLM
+    const searchBalancedExpectations = async (clmHash) => {
         try {
-            console.log(`Fetching dimension ${dimensionType} with hash: ${hash}`);
-            
-            // Construct the URL with query parameters for a GET request
-            const url = new URL('/api/card-collection', window.location.origin);
-            url.searchParams.append('action', 'get');
-            url.searchParams.append('hash', hash);
+            const response = await fetch(`/api/card-collection?action=searchByContent&query=${clmHash}`);
+            if (!response.ok) {
+                throw new Error(`API returned ${response.status}: ${response.statusText}`);
+            }
             
-            console.log(`API Request URL:`, url.toString());
+            const data = await response.json();
+            console.log('Search results for Balanced Expectations:', data);
             
-            // Use fetch with GET method
-            const response = await fetch(url.toString(), {
-                method: 'GET',
-                headers: {
-                    'Accept': 'application/json'
+            // Filter results to find only Balanced Expectations that reference this CLM
+            const balancedExpectationsFound = data.cards?.filter(card => {
+                try {
+                    const content = typeof card.content === 'string' 
+                        ? JSON.parse(card.content) 
+                        : card.content;
+                    
+                    return content.dimensionType === 'balancedExpectations' && 
+                           content.clmReference === clmHash;
+                } catch (err) {
+                    console.error('Error parsing card content:', err);
+                    return false;
                 }
-            });
+            }) || [];
             
-            console.log(`API Response status: ${response.status}`);
+            setBalancedExpectations(balancedExpectationsFound);
             
-            // Store the raw response text for debugging
-            const responseText = await response.text();
+        } catch (error) {
+            console.error('Error searching for Balanced Expectations:', error);
+            // Don't set an error state for this, just log it
+        }
+    };
+
+    // Helper function to fetch a single dimension by hash
+    const fetchDimension = async (dimensionType, hash) => {
+        try {
+            console.log(`Fetching ${dimensionType} dimension with hash ${hash}`);
             
-            setDebug(prev => ({ 
-                ...prev, 
-                apiResponse: {
-                    status: response.status,
-                    text: responseText.substring(0, 500) // Limit to first 500 chars for UI
-                }
+            // Update debug state
+            setDebug(prev => ({
+                ...prev,
+                lastFetchedHash: hash
             }));
             
+            // Make the API call
+            const response = await fetch(`/api/card-collection?action=get&hash=${hash}`);
+            
+            // Check if response is OK
             if (!response.ok) {
-                throw new Error(`Failed to fetch dimension: ${response.status}\nResponse: ${responseText.substring(0, 100)}...`);
+                throw new Error(`API returned ${response.status}: ${response.statusText}`);
             }
             
-            // Parse the response text
-            let result;
-            try {
-                result = JSON.parse(responseText);
-            } catch (e) {
-                throw new Error(`Invalid JSON response: ${responseText.substring(0, 100)}...`);
-            }
+            // Parse the response JSON
+            const responseData = await response.json();
+            console.log(`${dimensionType} API response:`, responseData);
             
-            if (!result.success) {
-                throw new Error(result.error || 'Failed to retrieve dimension data');
-            }
+            // Update debug state with the response data
+            setDebug(prev => ({
+                ...prev,
+                apiResponse: responseData
+            }));
             
-            console.log(`Successfully retrieved dimension:`, result.card);
+            // Extract content from the response data
+            let content = null;
+            if (responseData.card && responseData.card.content) {
+                content = typeof responseData.card.content === 'string'
+                    ? JSON.parse(responseData.card.content)
+                    : responseData.card.content;
+            }
             
-            // Store dimension data for debugging
-            setDebug(prev => ({ 
-                ...prev, 
-                dimensionData: result.card 
-            }));
+            // Dispatch to Redux store to cache the dimension
+            if (content && hash) {
+                dispatch({
+                    type: 'content/addCard',
+                    payload: {
+                        hash,
+                        card: responseData.card
+                    }
+                });
+            }
             
-            // Parse content if it's a string
-            const content = typeof result.card.content === 'string' 
-                ? JSON.parse(result.card.content) 
-                : result.card.content;
-                
             return content;
         } catch (error) {
-            console.error(`Error fetching dimension ${dimensionType}:`, error);
-            throw error;
+            console.error(`Error fetching ${dimensionType} dimension:`, error);
+            setError(`Error fetching ${dimensionType} dimension: ${error.message}`);
+            return null;
         }
     };
-
+    
     // Helper function to format content based on type
     const formatContent = (content) => {
-        if (!content) return '';
+        if (!content) {
+            return null;
+        }
         
-        // If content is already a string, return it
-        if (typeof content === 'string') return content;
+        if (typeof content === 'string') {
+            return content;
+        }
+        
+        if (Array.isArray(content)) {
+            return content.join('\n');
+        }
         
-        // If it's an object (parsed JSON), stringify it for display
         if (typeof content === 'object') {
             try {
-                // Filter out createdAt if it exists
-                const { createdAt, ...filteredContent } = content;
-                return JSON.stringify(filteredContent, null, 2);
+                return JSON.stringify(content, null, 2);
             } catch (e) {
-                console.error('Error stringifying content:', e);
+                return `Error formatting content: ${e.message}`;
             }
         }
         
-        // Fallback: convert to string
         return String(content);
     };
-
-    // Show loading state while dimensions are being loaded
+    
+    // Extract content from dimensions for display
+    const abstractSpec = dimensions.abstractSpecification || {};
+    const context = abstractSpec.context;
+    const goal = abstractSpec.goal;
+    const successCriteria = abstractSpec.successCriteria;
+    
+    const concreteImpl = dimensions.concreteImplementation || {};
+    const inputs = concreteImpl.inputs;
+    const activities = concreteImpl.activities;
+    const outputs = concreteImpl.outputs;
+    
     if (loading) {
         return <div className="clm-display-loading">Loading CLM dimensions...</div>;
     }
-
-    // Show error message if there was a problem
+    
     if (error) {
-        return <div className="clm-display-error">
-            <h3>Error</h3>
-            <p>{error}</p>
-            
-            {/* Debug information */}
-            <div className="debug-section">
-                <h4>Debug Information</h4>
-                
-                <div className="debug-item">
-                    <h5>Last Fetched Hash:</h5>
-                    <pre>{debug.lastFetchedHash || 'None'}</pre>
-                </div>
-                
-                {debug.apiResponse && (
-                    <div className="debug-item">
-                        <h5>API Response:</h5>
-                        <p>Status: {debug.apiResponse.status}</p>
-                        <pre>{debug.apiResponse.text || 'No response text'}</pre>
-                    </div>
-                )}
-                
-                <div className="debug-item">
-                    <h5>Dimension Hash References:</h5>
-                    <ul>
-                        {rootClm?.dimensions?.abstractSpecification && (
-                            <li><strong>Abstract Specification:</strong> <code>{rootClm.dimensions.abstractSpecification}</code></li>
-                        )}
-                        {rootClm?.dimensions?.concreteImplementation && (
-                            <li><strong>Concrete Implementation:</strong> <code>{rootClm.dimensions.concreteImplementation}</code></li>
-                        )}
-                        {rootClm?.dimensions?.balancedExpectations && (
-                            <li><strong>Balanced Expectations:</strong> <code>{rootClm.dimensions.balancedExpectations}</code></li>
-                        )}
-                    </ul>
+        return (
+            <div className="clm-display-error">
+                <h2>Error Loading CLM</h2>
+                <p>{error}</p>
+                <div className="debug-info">
+                    <h3>Debug Information</h3>
+                    <pre>{JSON.stringify({rootClm, debug}, null, 2)}</pre>
                 </div>
             </div>
-        </div>;
+        );
     }
-
-    // Show placeholder if no CLM is selected
-    if (!selectedHash || !rootClm) {
-        return <div className="clm-display-placeholder">
-            <h3>CLM Viewer</h3>
-            <p>Select a CLM from the content panel to view it</p>
-        </div>;
+    
+    if (!rootClm) {
+        return <div className="clm-display-empty">No CLM selected. Please select a CLM to view.</div>;
     }
-
-    // Extract the dimension data for display
-    const { context, goal, successCriteria } = dimensions.abstractSpecification || {};
-    const { inputs, activities, outputs } = dimensions.concreteImplementation || {};
-
+    
     return (
         <div className="clm-display-panel">
-            <h2 className="clm-title">{rootClm?.title || 'Cubical Logic Model'}</h2>
+            <h2>{rootClm.title || 'Untitled CLM'}</h2>
             
-            <div className="clm-metadata">
-                <p><strong>CLM Hash:</strong> <code>{selectedHash || 'N/A'}</code></p>
-                {rootClm?.type && <p><strong>Type:</strong> <code>{rootClm.type}</code></p>}
+            {/* Debug Info - Comment out in production */}
+            <div className="clm-debug-info" style={{ display: 'none' }}>
+                <h3>Debug Info</h3>
+                <pre>{JSON.stringify(debug, null, 2)}</pre>
             </div>
             
             {/* Display CLM in table format */}
@@ -383,12 +374,123 @@ const CLMDisplayPanel = ({ initialHash = '' }) => {
                     {rootClm?.dimensions?.concreteImplementation && (
                         <li><strong>Concrete Implementation:</strong> <code>{rootClm.dimensions.concreteImplementation}</code></li>
                     )}
-                    {rootClm?.dimensions?.balancedExpectations && (
-                        <li><strong>Balanced Expectations:</strong> <code>{rootClm.dimensions.balancedExpectations}</code></li>
-                    )}
                 </ul>
             </div>
             
+            {/* Balanced Expectations Section - Shows any found Balanced Expectations that reference this CLM */}
+            {balancedExpectations.length > 0 && (
+                <div className="balanced-expectations-section">
+                    <h3>Balanced Expectations Catalog</h3>
+                    <p>The following Balanced Expectations reference this CLM:</p>
+                    
+                    <table className="be-catalog-table">
+                        <thead>
+                            <tr>
+                                <th>#</th>
+                                <th>Hash</th>
+                                <th>Output Reference</th>
+                                <th>Created</th>
+                                <th>Actions</th>
+                            </tr>
+                        </thead>
+                        <tbody>
+                            {balancedExpectations.map((beCard, index) => {
+                                const beContent = typeof beCard.content === 'string' 
+                                    ? JSON.parse(beCard.content) 
+                                    : beCard.content;
+                                
+                                // Format timestamp if available
+                                const timestamp = beCard.g_time || beCard.timestamp || '';
+                                const formattedDate = timestamp ? new Date(timestamp).toLocaleString() : 'N/A';
+                                
+                                return (
+                                    <tr key={index} className="be-catalog-item">
+                                        <td>{index + 1}</td>
+                                        <td>
+                                            <code className="hash-value">{beCard.hash?.substring(0, 12)}...</code>
+                                        </td>
+                                        <td>
+                                            {beContent.outputReference ? (
+                                                <code className="hash-value">{beContent.outputReference.substring(0, 12)}...</code>
+                                            ) : 'N/A'}
+                                        </td>
+                                        <td>{formattedDate}</td>
+                                        <td>
+                                            <button 
+                                                className="be-view-button"
+                                                onClick={() => {
+                                                    // Dispatch to view this BE card
+                                                    dispatch({
+                                                        type: 'content/setSelectedHash',
+                                                        payload: beCard.hash
+                                                    });
+                                                }}
+                                            >
+                                                View
+                                            </button>
+                                            {beContent.outputReference && (
+                                                <button 
+                                                    className="output-view-button"
+                                                    onClick={() => {
+                                                        // Dispatch to view the output
+                                                        dispatch({
+                                                            type: 'content/setSelectedHash',
+                                                            payload: beContent.outputReference
+                                                        });
+                                                    }}
+                                                >
+                                                    View Output
+                                                </button>
+                                            )}
+                                        </td>
+                                    </tr>
+                                );
+                            })}
+                        </tbody>
+                    </table>
+                    
+                    {/* Add a button to create a new Balanced Expectation for this CLM */}
+                    <div className="be-actions">
+                        <button 
+                            className="create-be-button"
+                            onClick={() => {
+                                // Dispatch an action to open the Balanced Expectations creation form
+                                dispatch({
+                                    type: 'ui/openCreateBEForm',
+                                    payload: {
+                                        clmHash: selectedHash
+                                    }
+                                });
+                            }}
+                        >
+                            Create New Balanced Expectation
+                        </button>
+                    </div>
+                </div>
+            )}
+            
+            {/* Display empty message if no Balanced Expectations found */}
+            {balancedExpectations.length === 0 && selectedHash && (
+                <div className="balanced-expectations-empty">
+                    <h3>Balanced Expectations Catalog</h3>
+                    <p>No Balanced Expectations found for this CLM.</p>
+                    <button 
+                        className="create-be-button"
+                        onClick={() => {
+                            // Dispatch an action to open the Balanced Expectations creation form
+                            dispatch({
+                                type: 'ui/openCreateBEForm',
+                                payload: {
+                                    clmHash: selectedHash
+                                }
+                            });
+                        }}
+                    >
+                        Create New Balanced Expectation
+                    </button>
+                </div>
+            )}
+
             {/* JSON Structure Display - Optional, can be commented out if not needed */}
             <div className="clm-root-json">
                 <h3>Root CLM Structure</h3>
@@ -398,8 +500,7 @@ const CLMDisplayPanel = ({ initialHash = '' }) => {
   type: rootClm?.type || '',
   dimensions: {
     abstractSpecification: rootClm?.dimensions?.abstractSpecification || '',
-    concreteImplementation: rootClm?.dimensions?.concreteImplementation || '',
-    balancedExpectations: rootClm?.dimensions?.balancedExpectations || ''
+    concreteImplementation: rootClm?.dimensions?.concreteImplementation || ''
   }
 }, null, 2)}
                 </pre>
diff --git a/src/styles/clm-display.css b/src/styles/clm-display.css
index 0318087..4aa4172 100644
--- a/src/styles/clm-display.css
+++ b/src/styles/clm-display.css
@@ -324,6 +324,87 @@
     line-height: 1.5;
 }
 
+/* Balanced Expectations Catalog Styles */
+.balanced-expectations-section,
+.balanced-expectations-empty {
+  margin-top: 2rem;
+  padding: 1rem;
+  border: 1px solid #e0e0e0;
+  border-radius: 4px;
+  background-color: #f9f9f9;
+}
+
+.be-catalog-table {
+  width: 100%;
+  border-collapse: collapse;
+  margin: 1rem 0;
+  font-size: 0.9rem;
+}
+
+.be-catalog-table th,
+.be-catalog-table td {
+  padding: 0.75rem;
+  border: 1px solid #ddd;
+  text-align: left;
+}
+
+.be-catalog-table th {
+  background-color: #f2f2f2;
+  font-weight: 600;
+}
+
+.be-catalog-table tr:nth-child(even) {
+  background-color: #f8f8f8;
+}
+
+.be-catalog-table tr:hover {
+  background-color: #f0f0f0;
+}
+
+.hash-value {
+  font-family: monospace;
+  background-color: #f5f5f5;
+  padding: 0.2rem 0.4rem;
+  border-radius: 3px;
+  color: #444;
+}
+
+.be-view-button,
+.output-view-button,
+.create-be-button {
+  padding: 0.4rem 0.6rem;
+  margin-right: 0.5rem;
+  border: 1px solid #ccc;
+  border-radius: 3px;
+  background-color: #fff;
+  cursor: pointer;
+  font-size: 0.85rem;
+  transition: all 0.2s ease;
+}
+
+.be-view-button:hover,
+.output-view-button:hover {
+  background-color: #f0f0f0;
+}
+
+.create-be-button {
+  background-color: #4a89dc;
+  color: white;
+  border: none;
+  padding: 0.5rem 1rem;
+  margin-top: 1rem;
+  font-weight: 500;
+}
+
+.create-be-button:hover {
+  background-color: #3a79cc;
+}
+
+.be-actions {
+  margin-top: 1rem;
+  text-align: right;
+}
+
 @media (max-width: 768px) {
     .clm-metadata {
         flex-direction: column;

commit 0377de76989509c91ad2e90af5296f3fc6fe2055
Author: Henry Koo <lckoo1230@gmail.com>
Date:   Mon Apr 14 00:48:29 2025 +0800

    better clm display

diff --git a/src/components/panels/CLMDisplayPanel.jsx b/src/components/panels/CLMDisplayPanel.jsx
index 9613a95..b58cfaf 100644
--- a/src/components/panels/CLMDisplayPanel.jsx
+++ b/src/components/panels/CLMDisplayPanel.jsx
@@ -311,6 +311,10 @@ const CLMDisplayPanel = ({ initialHash = '' }) => {
         </div>;
     }
 
+    // Extract the dimension data for display
+    const { context, goal, successCriteria } = dimensions.abstractSpecification || {};
+    const { inputs, activities, outputs } = dimensions.concreteImplementation || {};
+
     return (
         <div className="clm-display-panel">
             <h2 className="clm-title">{rootClm?.title || 'Cubical Logic Model'}</h2>
@@ -320,115 +324,54 @@ const CLMDisplayPanel = ({ initialHash = '' }) => {
                 {rootClm?.type && <p><strong>Type:</strong> <code>{rootClm.type}</code></p>}
             </div>
             
-            {/* Root CLM JSON Structure Display */}
-            <div className="clm-root-json">
-                <h3>Root CLM Structure</h3>
-                <pre className="json-display">
-{JSON.stringify({
-  title: rootClm?.title || 'Cubical Logic Model',
-  type: rootClm?.type || '',
-  dimensions: {
-    abstractSpecification: rootClm?.dimensions?.abstractSpecification || '',
-    concreteImplementation: rootClm?.dimensions?.concreteImplementation || '',
-    balancedExpectations: rootClm?.dimensions?.balancedExpectations || ''
-  }
-}, null, 2)}
-                </pre>
-            </div>
-            
-            {/* Balanced Expectations Catalog Display */}
-            {dimensions.balancedExpectations && (
-                <div className="balanced-expectations-catalog">
-                    <h3>Balanced Expectations Dimension</h3>
-                    <div className="catalog-item">
-                        <div className="catalog-header">
-                            <span className="dimension-type">dimensionType: balancedExpectations</span>
-                            <span className="dimension-hash">Hash: {rootClm?.dimensions?.balancedExpectations?.substring(0, 10) || 'N/A'}...</span>
-                        </div>
-                        
-                        <div className="catalog-content">
-                            <div className="catalog-section">
-                                <h4>CLM Reference</h4>
-                                <p>{dimensions.balancedExpectations.clmReference || 'sha256:clm123...'}</p>
-                            </div>
-                            
-                            <div className="catalog-section">
-                                <h4>Practical Boundaries</h4>
-                                <p>{dimensions.balancedExpectations.practicalBoundaries || 'System constraints and error handling strategies'}</p>
-                            </div>
-                            
-                            <div className="catalog-section">
-                                <h4>Evaluation Metrics</h4>
-                                <p>{dimensions.balancedExpectations.evaluationMetrics || 'Performance indicators and monitoring thresholds'}</p>
-                            </div>
-                            
-                            <div className="catalog-section">
-                                <h4>Feedback Loops</h4>
-                                <p>{dimensions.balancedExpectations.feedbackLoops || 'User feedback channels and continuous improvement processes'}</p>
-                            </div>
-                        </div>
-                    </div>
-                </div>
-            )}
-            
-            {/* JSON Structure of Balanced Expectations */}
-            {dimensions.balancedExpectations && (
-                <div className="balanced-expectations-json">
-                    <h3>Balanced Expectations JSON</h3>
-                    <pre className="json-display">
-{JSON.stringify({
-  dimensionType: "balancedExpectations",
-  clmReference: dimensions.balancedExpectations.clmReference || "sha256:clm123...",
-  practicalBoundaries: dimensions.balancedExpectations.practicalBoundaries || "System constraints and error handling strategies",
-  evaluationMetrics: dimensions.balancedExpectations.evaluationMetrics || "Performance indicators and monitoring thresholds",
-  feedbackLoops: dimensions.balancedExpectations.feedbackLoops || "User feedback channels and continuous improvement processes"
-}, null, 2)}
-                    </pre>
-                </div>
-            )}
-            
-            {/* Display available dimensions */}
-            <div className="balanced-expectations-catalog">
-                <h3>Available Dimensions</h3>
-                <div className="catalog-item">
-                    <div className="catalog-header">
-                        <span className="dimension-type">Dimension Status</span>
-                    </div>
+            {/* Display CLM in table format */}
+            <table className="clm-table" width="600">
+                {/* Abstract Specification Section */}
+                <tbody>
+                    <tr>
+                        <th colSpan={6}><a href="#abstract-specification">Abstract Specification</a></th>
+                    </tr>
+                    <tr>
+                        <th colSpan={1}><a href="#context">Context</a></th>
+                        <td colSpan={5} style={{ wordWrap: 'break-word' }}>
+                            {formatContent(context) || 'No context available'}
+                        </td>
+                    </tr>
+                    <tr>
+                        <th colSpan={1}><a href="#goal">Goal</a></th>
+                        <td colSpan={5} style={{ wordWrap: 'break-word' }}>
+                            {formatContent(goal) || 'No goal available'}
+                        </td>
+                    </tr>
+                    <tr>
+                        <th colSpan={1}><a href="#success-criteria">Success Criteria</a></th>
+                        <td colSpan={5} style={{ wordWrap: 'break-word' }}>
+                            {formatContent(successCriteria) || 'No success criteria available'}
+                        </td>
+                    </tr>
                     
-                    <div className="catalog-content">
-                        {rootClm?.dimensions?.abstractSpecification && (
-                            <div className="catalog-section">
-                                <h4>Abstract Specification</h4>
-                                <p>Hash: <code>{rootClm.dimensions.abstractSpecification}</code></p>
-                                <p>Status: {dimensions.abstractSpecification ? '✅ Loaded' : '❌ Not Loaded'}</p>
-                            </div>
-                        )}
-                        
-                        {rootClm?.dimensions?.concreteImplementation && (
-                            <div className="catalog-section">
-                                <h4>Concrete Implementation</h4>
-                                <p>Hash: <code>{rootClm.dimensions.concreteImplementation}</code></p>
-                                <p>Status: {dimensions.concreteImplementation ? '✅ Loaded' : '❌ Not Loaded'}</p>
-                            </div>
-                        )}
-                        
-                        {rootClm?.dimensions?.balancedExpectations && (
-                            <div className="catalog-section">
-                                <h4>Balanced Expectations</h4>
-                                <p>Hash: <code>{rootClm.dimensions.balancedExpectations}</code></p>
-                                <p>Status: {dimensions.balancedExpectations ? '✅ Loaded' : '❌ Not Loaded'}</p>
-                            </div>
-                        )}
-                        
-                        {!rootClm?.dimensions?.balancedExpectations && (
-                            <div className="catalog-section">
-                                <h4>Balanced Expectations</h4>
-                                <p>This dimension is not available in the current CLM document.</p>
-                            </div>
-                        )}
-                    </div>
-                </div>
-            </div>
+                    {/* Concrete Implementation Section */}
+                    <tr>
+                        <th colSpan={6}><a href="#concrete-implementation">Concrete Implementation</a></th>
+                    </tr>
+                    <tr>
+                        <th colSpan={2}><a href="#inputs">Inputs</a></th>
+                        <th colSpan={2}><a href="#activities">Activities</a></th>
+                        <th colSpan={2}><a href="#outputs">Outputs</a></th>
+                    </tr>
+                    <tr>
+                        <td colSpan={2} style={{ wordWrap: 'break-word' }}>
+                            {formatContent(inputs) || 'No inputs available'}
+                        </td>
+                        <td colSpan={2} style={{ wordWrap: 'break-word' }}>
+                            {formatContent(activities) || 'No activities available'}
+                        </td>
+                        <td colSpan={2} style={{ wordWrap: 'break-word' }}>
+                            {formatContent(outputs) || 'No outputs available'}
+                        </td>
+                    </tr>
+                </tbody>
+            </table>
             
             {/* Dimension Hash References */}
             <div className="clm-dimension-hashes">
@@ -445,6 +388,22 @@ const CLMDisplayPanel = ({ initialHash = '' }) => {
                     )}
                 </ul>
             </div>
+            
+            {/* JSON Structure Display - Optional, can be commented out if not needed */}
+            <div className="clm-root-json">
+                <h3>Root CLM Structure</h3>
+                <pre className="json-display">
+{JSON.stringify({
+  title: rootClm?.title || 'Cubical Logic Model',
+  type: rootClm?.type || '',
+  dimensions: {
+    abstractSpecification: rootClm?.dimensions?.abstractSpecification || '',
+    concreteImplementation: rootClm?.dimensions?.concreteImplementation || '',
+    balancedExpectations: rootClm?.dimensions?.balancedExpectations || ''
+  }
+}, null, 2)}
+                </pre>
+            </div>
         </div>
     );
 };

commit 8359184b3a70b890b6bef241c0347567d7aa081a
Author: Henry Koo <lckoo1230@gmail.com>
Date:   Mon Apr 14 00:44:13 2025 +0800

    clm display

diff --git a/src/components/panels/CLMDisplayPanel.jsx b/src/components/panels/CLMDisplayPanel.jsx
index 59ee3df..9613a95 100644
--- a/src/components/panels/CLMDisplayPanel.jsx
+++ b/src/components/panels/CLMDisplayPanel.jsx
@@ -12,6 +12,11 @@ const CLMDisplayPanel = ({ initialHash = '' }) => {
         concreteImplementation: null,
         balancedExpectations: null
     });
+    const [debug, setDebug] = useState({
+        lastFetchedHash: null,
+        apiResponse: null,
+        dimensionData: null
+    });
 
     const dispatch = useDispatch();
     
@@ -24,17 +29,46 @@ const CLMDisplayPanel = ({ initialHash = '' }) => {
         // Find the card by hash
         const selectedCard = selectedHash ? cards[selectedHash] : null;
         if (selectedCard && selectedCard.content) {
-            // Filter out createdAt if it exists in the content
-            const { createdAt, ...filteredContent } = selectedCard.content;
-            return filteredContent;
+            try {
+                // If content is a string, try to parse it
+                const content = typeof selectedCard.content === 'string' 
+                    ? JSON.parse(selectedCard.content) 
+                    : selectedCard.content;
+                
+                // Filter out createdAt if it exists in the content
+                const { createdAt, ...filteredContent } = content;
+                return filteredContent;
+            } catch (err) {
+                console.error('Error parsing CLM content:', err);
+                return selectedCard.content;
+            }
         }
         return null;
     }, [cards, selectedHash]);
 
     // Load dimensions when root CLM changes
     useEffect(() => {
-        if (rootClm && rootClm.dimensions) {
-            loadDimensions(rootClm.dimensions);
+        console.log('Root CLM:', rootClm);
+        // Clear any previous error
+        setError(null);
+        
+        if (rootClm) {
+            if (rootClm.dimensions) {
+                loadDimensions(rootClm.dimensions);
+            } else if (rootClm.type === 'clm_document' && rootClm.dimensions) {
+                // Special handling for clm_document type
+                loadDimensions(rootClm.dimensions);
+            } else {
+                // Reset dimensions if no dimensions property
+                setDimensions({
+                    abstractSpecification: null,
+                    concreteImplementation: null,
+                    balancedExpectations: null
+                });
+                
+                // Set error for debugging
+                setError(`Invalid CLM format: dimensions property is missing. Content type: ${typeof rootClm}, Keys: ${Object.keys(rootClm).join(', ')}`);
+            }
         } else {
             // Reset dimensions if no root CLM
             setDimensions({
@@ -42,11 +76,6 @@ const CLMDisplayPanel = ({ initialHash = '' }) => {
                 concreteImplementation: null,
                 balancedExpectations: null
             });
-            
-            // If rootClm exists but dimensions are missing, set error
-            if (rootClm && !rootClm.dimensions) {
-                setError("Invalid CLM format: dimensions property is missing");
-            }
         }
     }, [rootClm]);
 
@@ -60,44 +89,72 @@ const CLMDisplayPanel = ({ initialHash = '' }) => {
             
             setLoading(true);
             setError(null);
+            console.log('Loading dimensions:', dimensionHashes);
             
             // Check if abstract specification is already in Redux store
             let abstractSpec = null;
             if (dimensionHashes.abstractSpecification) {
                 const abstractHash = dimensionHashes.abstractSpecification;
+                
+                // Check if the card is already in the Redux store
                 if (cards[abstractHash]) {
-                    abstractSpec = cards[abstractHash].content;
+                    console.log(`Found Abstract Specification in Redux store: ${abstractHash}`);
+                    abstractSpec = typeof cards[abstractHash].content === 'string' 
+                        ? JSON.parse(cards[abstractHash].content)
+                        : cards[abstractHash].content;
                 } else {
                     // If not in store, fetch it
-                    abstractSpec = await fetchDimension(abstractHash);
+                    console.log(`Fetching Abstract Specification: ${abstractHash}`);
+                    abstractSpec = await fetchDimension('abstractSpecification', abstractHash);
+                }
+                
+                if (abstractSpec) {
+                    setDimensions(prev => ({ ...prev, abstractSpecification: abstractSpec }));
                 }
-                setDimensions(prev => ({ ...prev, abstractSpecification: abstractSpec }));
             }
             
             // Check if concrete implementation is already in Redux store
             let concreteImpl = null;
             if (dimensionHashes.concreteImplementation) {
                 const concreteHash = dimensionHashes.concreteImplementation;
+                
+                // Check if the card is already in the Redux store
                 if (cards[concreteHash]) {
-                    concreteImpl = cards[concreteHash].content;
+                    console.log(`Found Concrete Implementation in Redux store: ${concreteHash}`);
+                    concreteImpl = typeof cards[concreteHash].content === 'string' 
+                        ? JSON.parse(cards[concreteHash].content)
+                        : cards[concreteHash].content;
                 } else {
                     // If not in store, fetch it
-                    concreteImpl = await fetchDimension(concreteHash);
+                    console.log(`Fetching Concrete Implementation: ${concreteHash}`);
+                    concreteImpl = await fetchDimension('concreteImplementation', concreteHash);
+                }
+                
+                if (concreteImpl) {
+                    setDimensions(prev => ({ ...prev, concreteImplementation: concreteImpl }));
                 }
-                setDimensions(prev => ({ ...prev, concreteImplementation: concreteImpl }));
             }
             
             // Check if balanced expectations is already in Redux store
             let balancedExp = null;
             if (dimensionHashes.balancedExpectations) {
                 const balancedHash = dimensionHashes.balancedExpectations;
+                
+                // Check if the card is already in the Redux store
                 if (cards[balancedHash]) {
-                    balancedExp = cards[balancedHash].content;
+                    console.log(`Found Balanced Expectations in Redux store: ${balancedHash}`);
+                    balancedExp = typeof cards[balancedHash].content === 'string' 
+                        ? JSON.parse(cards[balancedHash].content)
+                        : cards[balancedHash].content;
                 } else {
                     // If not in store, fetch it
-                    balancedExp = await fetchDimension(balancedHash);
+                    console.log(`Fetching Balanced Expectations: ${balancedHash}`);
+                    balancedExp = await fetchDimension('balancedExpectations', balancedHash);
+                }
+                
+                if (balancedExp) {
+                    setDimensions(prev => ({ ...prev, balancedExpectations: balancedExp }));
                 }
-                setDimensions(prev => ({ ...prev, balancedExpectations: balancedExp }));
             }
         } catch (error) {
             console.error('Error loading dimensions:', error);
@@ -108,28 +165,74 @@ const CLMDisplayPanel = ({ initialHash = '' }) => {
     };
 
     // Helper function to fetch a single dimension by hash
-    const fetchDimension = async (hash) => {
-        const response = await fetch('/api/card-collection', {
-            method: 'POST',
-            headers: {
-                'Content-Type': 'application/json'
-            },
-            body: JSON.stringify({
-                action: 'get',
-                hash: hash
-            })
-        });
-
-        if (!response.ok) {
-            throw new Error(`Failed to fetch dimension: ${response.status}`);
-        }
-
-        const result = await response.json();
-        if (!result.success) {
-            throw new Error(result.error || 'Failed to retrieve dimension data');
+    const fetchDimension = async (dimensionType, hash) => {
+        setDebug(prev => ({ ...prev, lastFetchedHash: hash }));
+        
+        try {
+            console.log(`Fetching dimension ${dimensionType} with hash: ${hash}`);
+            
+            // Construct the URL with query parameters for a GET request
+            const url = new URL('/api/card-collection', window.location.origin);
+            url.searchParams.append('action', 'get');
+            url.searchParams.append('hash', hash);
+            
+            console.log(`API Request URL:`, url.toString());
+            
+            // Use fetch with GET method
+            const response = await fetch(url.toString(), {
+                method: 'GET',
+                headers: {
+                    'Accept': 'application/json'
+                }
+            });
+            
+            console.log(`API Response status: ${response.status}`);
+            
+            // Store the raw response text for debugging
+            const responseText = await response.text();
+            
+            setDebug(prev => ({ 
+                ...prev, 
+                apiResponse: {
+                    status: response.status,
+                    text: responseText.substring(0, 500) // Limit to first 500 chars for UI
+                }
+            }));
+            
+            if (!response.ok) {
+                throw new Error(`Failed to fetch dimension: ${response.status}\nResponse: ${responseText.substring(0, 100)}...`);
+            }
+            
+            // Parse the response text
+            let result;
+            try {
+                result = JSON.parse(responseText);
+            } catch (e) {
+                throw new Error(`Invalid JSON response: ${responseText.substring(0, 100)}...`);
+            }
+            
+            if (!result.success) {
+                throw new Error(result.error || 'Failed to retrieve dimension data');
+            }
+            
+            console.log(`Successfully retrieved dimension:`, result.card);
+            
+            // Store dimension data for debugging
+            setDebug(prev => ({ 
+                ...prev, 
+                dimensionData: result.card 
+            }));
+            
+            // Parse content if it's a string
+            const content = typeof result.card.content === 'string' 
+                ? JSON.parse(result.card.content) 
+                : result.card.content;
+                
+            return content;
+        } catch (error) {
+            console.error(`Error fetching dimension ${dimensionType}:`, error);
+            throw error;
         }
-
-        return result.card.content;
     };
 
     // Helper function to format content based on type
@@ -161,7 +264,43 @@ const CLMDisplayPanel = ({ initialHash = '' }) => {
 
     // Show error message if there was a problem
     if (error) {
-        return <div className="clm-display-error">{error}</div>;
+        return <div className="clm-display-error">
+            <h3>Error</h3>
+            <p>{error}</p>
+            
+            {/* Debug information */}
+            <div className="debug-section">
+                <h4>Debug Information</h4>
+                
+                <div className="debug-item">
+                    <h5>Last Fetched Hash:</h5>
+                    <pre>{debug.lastFetchedHash || 'None'}</pre>
+                </div>
+                
+                {debug.apiResponse && (
+                    <div className="debug-item">
+                        <h5>API Response:</h5>
+                        <p>Status: {debug.apiResponse.status}</p>
+                        <pre>{debug.apiResponse.text || 'No response text'}</pre>
+                    </div>
+                )}
+                
+                <div className="debug-item">
+                    <h5>Dimension Hash References:</h5>
+                    <ul>
+                        {rootClm?.dimensions?.abstractSpecification && (
+                            <li><strong>Abstract Specification:</strong> <code>{rootClm.dimensions.abstractSpecification}</code></li>
+                        )}
+                        {rootClm?.dimensions?.concreteImplementation && (
+                            <li><strong>Concrete Implementation:</strong> <code>{rootClm.dimensions.concreteImplementation}</code></li>
+                        )}
+                        {rootClm?.dimensions?.balancedExpectations && (
+                            <li><strong>Balanced Expectations:</strong> <code>{rootClm.dimensions.balancedExpectations}</code></li>
+                        )}
+                    </ul>
+                </div>
+            </div>
+        </div>;
     }
 
     // Show placeholder if no CLM is selected
@@ -172,129 +311,126 @@ const CLMDisplayPanel = ({ initialHash = '' }) => {
         </div>;
     }
 
-    // Show error if dimensions couldn't be loaded
-    if (!dimensions.abstractSpecification || !dimensions.concreteImplementation || !dimensions.balancedExpectations) {
-        return <div className="clm-display-error">
-            <h3>Incomplete CLM Data</h3>
-            <p>Unable to load all dimensions for this CLM. Some dimension hashes may be invalid or unavailable.</p>
-            <div className="clm-incomplete-details">
-                <p>CLM Hash: <code>{selectedHash}</code></p>
-                <p>Missing dimensions:</p>
-                <ul>
-                    {!dimensions.abstractSpecification && rootClm?.dimensions?.abstractSpecification && 
-                        <li>Abstract Specification ({rootClm.dimensions.abstractSpecification})</li>}
-                    {!dimensions.concreteImplementation && rootClm?.dimensions?.concreteImplementation && 
-                        <li>Concrete Implementation ({rootClm.dimensions.concreteImplementation})</li>}
-                    {!dimensions.balancedExpectations && rootClm?.dimensions?.balancedExpectations && 
-                        <li>Balanced Expectations ({rootClm.dimensions.balancedExpectations})</li>}
-                </ul>
-            </div>
-        </div>;
-    }
-
-    // Extract the abstract specification dimension data
-    const { context, goal, successCriteria } = dimensions.abstractSpecification || {};
-    
-    // Extract the concrete implementation dimension data
-    const { inputs, activities, outputs } = dimensions.concreteImplementation || {};
-    
-    // Extract the balanced expectations dimension data
-    const { practicalBoundaries, evaluationMetrics, feedbackLoops } = dimensions.balancedExpectations || {};
-
     return (
         <div className="clm-display-panel">
             <h2 className="clm-title">{rootClm?.title || 'Cubical Logic Model'}</h2>
             
             <div className="clm-metadata">
-                <p><strong>CLM Hash:</strong> <code>{selectedHash?.substring(0, 10) || 'N/A'}...</code></p>
+                <p><strong>CLM Hash:</strong> <code>{selectedHash || 'N/A'}</code></p>
+                {rootClm?.type && <p><strong>Type:</strong> <code>{rootClm.type}</code></p>}
+            </div>
+            
+            {/* Root CLM JSON Structure Display */}
+            <div className="clm-root-json">
+                <h3>Root CLM Structure</h3>
+                <pre className="json-display">
+{JSON.stringify({
+  title: rootClm?.title || 'Cubical Logic Model',
+  type: rootClm?.type || '',
+  dimensions: {
+    abstractSpecification: rootClm?.dimensions?.abstractSpecification || '',
+    concreteImplementation: rootClm?.dimensions?.concreteImplementation || '',
+    balancedExpectations: rootClm?.dimensions?.balancedExpectations || ''
+  }
+}, null, 2)}
+                </pre>
             </div>
             
-            <table className="clm-table">
-                <tbody>
-                    {/* Abstract Specification Section */}
-                    <tr>
-                        <th colSpan={6}>
-                            <a href="#abstract-specification">Abstract Specification</a>
-                            {rootClm?.dimensions?.abstractSpecification && (
-                                <small className="dimension-hash">Hash: {rootClm.dimensions.abstractSpecification.substring(0, 8)}...</small>
-                            )}
-                        </th>
-                    </tr>
-                    <tr>
-                        <th colSpan={1}><a href="#context">Context</a></th>
-                        <td colSpan={5} style={{ wordWrap: 'break-word' }}>
-                            {formatContent(context)}
-                        </td>
-                    </tr>
-                    <tr>
-                        <th colSpan={1}><a href="#goal">Goal</a></th>
-                        <td colSpan={5} style={{ wordWrap: 'break-word' }}>
-                            {formatContent(goal)}
-                        </td>
-                    </tr>
-                    <tr>
-                        <th colSpan={1}><a href="#success-criteria">Success Criteria</a></th>
-                        <td colSpan={5} style={{ wordWrap: 'break-word' }}>
-                            {formatContent(successCriteria)}
-                        </td>
-                    </tr>
+            {/* Balanced Expectations Catalog Display */}
+            {dimensions.balancedExpectations && (
+                <div className="balanced-expectations-catalog">
+                    <h3>Balanced Expectations Dimension</h3>
+                    <div className="catalog-item">
+                        <div className="catalog-header">
+                            <span className="dimension-type">dimensionType: balancedExpectations</span>
+                            <span className="dimension-hash">Hash: {rootClm?.dimensions?.balancedExpectations?.substring(0, 10) || 'N/A'}...</span>
+                        </div>
+                        
+                        <div className="catalog-content">
+                            <div className="catalog-section">
+                                <h4>CLM Reference</h4>
+                                <p>{dimensions.balancedExpectations.clmReference || 'sha256:clm123...'}</p>
+                            </div>
+                            
+                            <div className="catalog-section">
+                                <h4>Practical Boundaries</h4>
+                                <p>{dimensions.balancedExpectations.practicalBoundaries || 'System constraints and error handling strategies'}</p>
+                            </div>
+                            
+                            <div className="catalog-section">
+                                <h4>Evaluation Metrics</h4>
+                                <p>{dimensions.balancedExpectations.evaluationMetrics || 'Performance indicators and monitoring thresholds'}</p>
+                            </div>
+                            
+                            <div className="catalog-section">
+                                <h4>Feedback Loops</h4>
+                                <p>{dimensions.balancedExpectations.feedbackLoops || 'User feedback channels and continuous improvement processes'}</p>
+                            </div>
+                        </div>
+                    </div>
+                </div>
+            )}
+            
+            {/* JSON Structure of Balanced Expectations */}
+            {dimensions.balancedExpectations && (
+                <div className="balanced-expectations-json">
+                    <h3>Balanced Expectations JSON</h3>
+                    <pre className="json-display">
+{JSON.stringify({
+  dimensionType: "balancedExpectations",
+  clmReference: dimensions.balancedExpectations.clmReference || "sha256:clm123...",
+  practicalBoundaries: dimensions.balancedExpectations.practicalBoundaries || "System constraints and error handling strategies",
+  evaluationMetrics: dimensions.balancedExpectations.evaluationMetrics || "Performance indicators and monitoring thresholds",
+  feedbackLoops: dimensions.balancedExpectations.feedbackLoops || "User feedback channels and continuous improvement processes"
+}, null, 2)}
+                    </pre>
+                </div>
+            )}
+            
+            {/* Display available dimensions */}
+            <div className="balanced-expectations-catalog">
+                <h3>Available Dimensions</h3>
+                <div className="catalog-item">
+                    <div className="catalog-header">
+                        <span className="dimension-type">Dimension Status</span>
+                    </div>
                     
-                    {/* Concrete Implementation Section */}
-                    <tr>
-                        <th colSpan={6}>
-                            <a href="#concrete-implementation">Concrete Implementation</a>
-                            {rootClm?.dimensions?.concreteImplementation && (
-                                <small className="dimension-hash">Hash: {rootClm.dimensions.concreteImplementation.substring(0, 8)}...</small>
-                            )}
-                        </th>
-                    </tr>
-                    <tr>
-                        <th colSpan={2}><a href="#inputs">Inputs</a></th>
-                        <th colSpan={2}><a href="#activities">Activities</a></th>
-                        <th colSpan={2}><a href="#outputs">Outputs</a></th>
-                    </tr>
-                    <tr>
-                        <td colSpan={2} style={{ wordWrap: 'break-word' }}>
-                            {formatContent(inputs)}
-                        </td>
-                        <td colSpan={2} style={{ wordWrap: 'break-word' }}>
-                            {formatContent(activities)}
-                        </td>
-                        <td colSpan={2} style={{ wordWrap: 'break-word' }}>
-                            {formatContent(outputs)}
-                        </td>
-                    </tr>
-
-                    {/* Balanced Expectations Section */}
-                    <tr>
-                        <th colSpan={6}>
-                            <a href="#balanced-expectations">Balanced Expectations</a>
-                            {rootClm?.dimensions?.balancedExpectations && (
-                                <small className="dimension-hash">Hash: {rootClm.dimensions.balancedExpectations.substring(0, 8)}...</small>
-                            )}
-                        </th>
-                    </tr>
-                    <tr>
-                        <th colSpan={2}><a href="#practical-boundaries">Practical Boundaries</a></th>
-                        <td colSpan={4} style={{ wordWrap: 'break-word' }}>
-                            {formatContent(practicalBoundaries)}
-                        </td>
-                    </tr>
-                    <tr>
-                        <th colSpan={2}><a href="#evaluation-metrics">Evaluation Metrics</a></th>
-                        <td colSpan={4} style={{ wordWrap: 'break-word' }}>
-                            {formatContent(evaluationMetrics)}
-                        </td>
-                    </tr>
-                    <tr>
-                        <th colSpan={2}><a href="#feedback-loops">Feedback Loops</a></th>
-                        <td colSpan={4} style={{ wordWrap: 'break-word' }}>
-                            {formatContent(feedbackLoops)}
-                        </td>
-                    </tr>
-                </tbody>
-            </table>
+                    <div className="catalog-content">
+                        {rootClm?.dimensions?.abstractSpecification && (
+                            <div className="catalog-section">
+                                <h4>Abstract Specification</h4>
+                                <p>Hash: <code>{rootClm.dimensions.abstractSpecification}</code></p>
+                                <p>Status: {dimensions.abstractSpecification ? '✅ Loaded' : '❌ Not Loaded'}</p>
+                            </div>
+                        )}
+                        
+                        {rootClm?.dimensions?.concreteImplementation && (
+                            <div className="catalog-section">
+                                <h4>Concrete Implementation</h4>
+                                <p>Hash: <code>{rootClm.dimensions.concreteImplementation}</code></p>
+                                <p>Status: {dimensions.concreteImplementation ? '✅ Loaded' : '❌ Not Loaded'}</p>
+                            </div>
+                        )}
+                        
+                        {rootClm?.dimensions?.balancedExpectations && (
+                            <div className="catalog-section">
+                                <h4>Balanced Expectations</h4>
+                                <p>Hash: <code>{rootClm.dimensions.balancedExpectations}</code></p>
+                                <p>Status: {dimensions.balancedExpectations ? '✅ Loaded' : '❌ Not Loaded'}</p>
+                            </div>
+                        )}
+                        
+                        {!rootClm?.dimensions?.balancedExpectations && (
+                            <div className="catalog-section">
+                                <h4>Balanced Expectations</h4>
+                                <p>This dimension is not available in the current CLM document.</p>
+                            </div>
+                        )}
+                    </div>
+                </div>
+            </div>
             
+            {/* Dimension Hash References */}
             <div className="clm-dimension-hashes">
                 <h3>Dimension Hash References</h3>
                 <ul>
diff --git a/src/styles/clm-display.css b/src/styles/clm-display.css
index 809cfb1..0318087 100644
--- a/src/styles/clm-display.css
+++ b/src/styles/clm-display.css
@@ -54,12 +54,82 @@
     border: 1px solid #fed7d7;
     background-color: #fff5f5;
     text-align: left;
+    align-items: flex-start;
 }
 
 .clm-display-error h3 {
     margin-top: 0;
     text-align: center;
     margin-bottom: 16px;
+    width: 100%;
+}
+
+/* Debug Section Styles */
+.debug-section {
+    background-color: #2d3748;
+    color: #e2e8f0;
+    border-radius: 8px;
+    padding: 16px;
+    margin-top: 20px;
+    width: 100%;
+    overflow: auto;
+}
+
+.debug-section h4 {
+    color: #63b3ed;
+    margin-top: 0;
+    margin-bottom: 16px;
+    text-align: center;
+}
+
+.debug-item {
+    margin-bottom: 16px;
+    padding-bottom: 16px;
+    border-bottom: 1px solid #4a5568;
+}
+
+.debug-item:last-child {
+    margin-bottom: 0;
+    padding-bottom: 0;
+    border-bottom: none;
+}
+
+.debug-item h5 {
+    color: #a0aec0;
+    margin-top: 0;
+    margin-bottom: 8px;
+}
+
+.debug-item pre {
+    background-color: #1a202c;
+    padding: 12px;
+    border-radius: 6px;
+    overflow-x: auto;
+    margin: 0;
+    font-family: "Consolas", "Monaco", monospace;
+    font-size: 0.85rem;
+    color: #f7fafc;
+    white-space: pre-wrap;
+    word-break: break-word;
+}
+
+.debug-item ul {
+    list-style-type: none;
+    padding: 0;
+    margin: 0;
+}
+
+.debug-item li {
+    margin-bottom: 8px;
+}
+
+.debug-item code {
+    background-color: #1a202c;
+    color: #e2e8f0;
+    padding: 2px 6px;
+    border-radius: 4px;
+    font-size: 0.8rem;
+    word-break: break-all;
 }
 
 .clm-incomplete-details {
@@ -122,6 +192,98 @@
     transform: translateY(-50%);
 }
 
+/* JSON Structure Display */
+.clm-root-json,
+.balanced-expectations-json {
+    background-color: #1a202c;
+    color: #e2e8f0;
+    border-radius: 8px;
+    margin-bottom: 20px;
+    padding: 16px;
+    box-shadow: 0 4px 6px -1px rgba(0, 0, 0, 0.1), 0 2px 4px -1px rgba(0, 0, 0, 0.06);
+}
+
+.clm-root-json h3,
+.balanced-expectations-json h3,
+.balanced-expectations-catalog h3 {
+    color: #63b3ed;
+    margin-top: 0;
+    margin-bottom: 12px;
+    font-size: 1.2rem;
+}
+
+.json-display {
+    font-family: "Consolas", "Monaco", monospace;
+    white-space: pre-wrap;
+    margin: 0;
+    padding: 8px;
+    background-color: #2d3748;
+    border-radius: 6px;
+    font-size: 0.9rem;
+    line-height: 1.5;
+    color: #f7fafc;
+    overflow-x: auto;
+}
+
+/* Balanced Expectations Catalog Display */
+.balanced-expectations-catalog {
+    margin-bottom: 20px;
+}
+
+.catalog-item {
+    border: 1px solid #e2e8f0;
+    border-radius: 8px;
+    overflow: hidden;
+    box-shadow: 0 4px 6px -1px rgba(0, 0, 0, 0.1), 0 2px 4px -1px rgba(0, 0, 0, 0.06);
+}
+
+.catalog-header {
+    background-color: #2d3748;
+    color: #e2e8f0;
+    padding: 12px 16px;
+    display: flex;
+    justify-content: space-between;
+    align-items: center;
+}
+
+.dimension-type {
+    font-family: "Consolas", "Monaco", monospace;
+    font-size: 0.9rem;
+}
+
+.catalog-content {
+    padding: 16px;
+    background-color: #f7fafc;
+}
+
+.catalog-section {
+    margin-bottom: 16px;
+    border-bottom: 1px solid #e2e8f0;
+    padding-bottom: 16px;
+}
+
+.catalog-section:last-child {
+    margin-bottom: 0;
+    border-bottom: none;
+    padding-bottom: 0;
+}
+
+.catalog-section h4 {
+    color: #4a5568;
+    font-size: 1.05rem;
+    margin-top: 0;
+    margin-bottom: 8px;
+}
+
+.catalog-section p {
+    margin: 0;
+    color: #1a202c;
+    font-size: 0.95rem;
+    line-height: 1.5;
+    white-space: pre-wrap;
+    word-break: break-word;
+}
+
 .clm-dimension-hashes {
     margin-top: 30px;
     padding: 16px;
@@ -181,4 +343,13 @@
         transform: none;
         margin-top: 4px;
     }
+    
+    .catalog-header {
+        flex-direction: column;
+        align-items: flex-start;
+    }
+    
+    .dimension-hash {
+        margin-top: 8px;
+    }
 }

commit a199a60a2e5ad4f06ae9c98b7adcf829cd2c1296
Author: Henry Koo <lckoo1230@gmail.com>
Date:   Sun Apr 13 19:53:14 2025 +0800

    new start

diff --git a/package.json b/package.json
index 25767ab..0a33b48 100644
--- a/package.json
+++ b/package.json
@@ -4,7 +4,7 @@
   "version": "0.0.1",
   "scripts": {
     "dev": "astro dev --port 4321 --host",
-    "start": "astro dev --port 4322 --host",
+    "start": "astro dev --port 4321 --host",
     "build": "astro check && astro build",
     "build:nocheck": "astro build --no-check",
     "preview": "astro preview",

commit 75520cf3e5b2dbe9317283ac5b2c126683bbe24e
Author: Henry Koo <lckoo1230@gmail.com>
Date:   Sun Apr 13 19:42:11 2025 +0800

    new public domain

diff --git a/Docs/to-do-plan b/Docs/to-do-plan
index 98e69bb..fc99a35 160000
--- a/Docs/to-do-plan
+++ b/Docs/to-do-plan
@@ -1 +1 @@
-Subproject commit 98e69bb1220693b3b561b31485c09fff2f74f3fe
+Subproject commit fc99a35ab5c0893ad2f2555bf793fed4780c6f58
diff --git a/astro.config.mjs b/astro.config.mjs
index 229daf9..a1bee3a 100644
--- a/astro.config.mjs
+++ b/astro.config.mjs
@@ -153,7 +153,7 @@ export default defineConfig({
       strictPort: true,
       proxy: {},
       cors: true,
-      allowedHosts: ['localhost', '127.0.0.1', 'todo.pkc.pub', '10.243.143.134', '172.22.1.146']
+      allowedHosts: ['localhost', '127.0.0.1', 'todo.pkc.pub', '10.243.143.134', '172.22.1.146', 'todo.toyhouse.cc']
     }
   },
   server: {
```
